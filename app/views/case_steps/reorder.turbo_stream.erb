<%= turbo_stream.remove dom_id(@step, dom_id(@case)) -%>

<% if @step_index <= 0 -%>
  <%= turbo_stream.prepend dom_id(@case, :steps) do -%>
    <%= render 'case_steps/builder_item', test_case: @case, step: @step, position: :first -%>
  <% end -%>
<% else -%>
  <%= turbo_stream.after "#{dom_id(@case)}_step_#{@step_ids[@step_index - 1]}" do -%>
    <%= render 'case_steps/builder_item', test_case: @case, step: @step, position: @step_index < @step_ids.size - 1 ? :middle : :last -%>
  <% end -%>
<% end -%>
